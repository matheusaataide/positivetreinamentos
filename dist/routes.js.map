{"version":3,"sources":["../src/routes.js"],"names":["router","express","Router","get","req","res","status","json","usersCtrl","database","list","insert","index","remove","put","edit","sectionsCtrl","getByName","coursesCtrl","postsCtrl","post","console","log","body","name","email","whatsapp","content","to","emailSender","send"],"mappings":";;;;;;;AAAA;;AAEA;;AACA;;AACA;;AACA;;AACA;;AAEA;;AACA;;;;AAEA,IAAMA,MAAM,GAAGC,oBAAQC,MAAR,EAAf,C,CAEA;;;AACAF,MAAM,CAACG,GAAP,CAAW,GAAX,EAAgB,UAACC,GAAD,EAAMC,GAAN,EAAc;AAC1BA,EAAAA,GAAG,CAACC,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AACjB,WAAO,uBADU;AAEjB,WAAO,yCAFU;AAGjB,iBAAa;AACT,cAAQ,gBADC;AAET,eAAS,6BAFA;AAGT,iBAAW;AAHF;AAHI,GAArB;AASH,CAVD;AAYA,IAAMC,SAAS,GAAG,uBAAeC,kBAAf,CAAlB;AACAT,MAAM,CAACG,GAAP,CAAW,QAAX,EAAqBK,SAAS,CAACE,IAA/B;AACAV,MAAM,CAACG,GAAP,CAAW,QAAX,EAAqBK,SAAS,CAACG,MAA/B;AACAX,MAAM,CAACG,GAAP,CAAW,YAAX,EAAyBK,SAAS,CAACI,KAAnC;AACAZ,MAAM,UAAN,CAAc,YAAd,EAA4BQ,SAAS,CAACK,MAAtC;AACAb,MAAM,CAACc,GAAP,CAAW,YAAX,EAAyBN,SAAS,CAACO,IAAnC;AAEA,IAAMC,YAAY,GAAG,0BAAkBP,kBAAlB,CAArB;AACAT,MAAM,CAACG,GAAP,CAAW,iBAAX,EAA8Ba,YAAY,CAACC,SAA3C;AACAjB,MAAM,CAACG,GAAP,CAAW,sBAAX,EAAmCa,YAAY,CAACJ,KAAhD;AAEA,IAAMM,WAAW,GAAG,yBAAiBT,kBAAjB,CAApB;AACAT,MAAM,CAACG,GAAP,CAAW,UAAX,EAAuBe,WAAW,CAACR,IAAnC;AACAV,MAAM,CAACG,GAAP,CAAW,cAAX,EAA2Be,WAAW,CAACN,KAAvC;AAEA,IAAMO,SAAS,GAAG,uBAAeV,kBAAf,CAAlB;AACAT,MAAM,CAACG,GAAP,CAAW,QAAX,EAAqBgB,SAAS,CAACT,IAA/B;AACAV,MAAM,CAACG,GAAP,CAAW,YAAX,EAAyBgB,SAAS,CAACP,KAAnC,E,CAEA;;AACAZ,MAAM,CAACoB,IAAP,CAAY,WAAZ,EAAyB,UAAChB,GAAD,EAAMC,GAAN,EAAc;AACnCgB,EAAAA,OAAO,CAACC,GAAR,CAAYlB,GAAG,CAACmB,IAAhB;AADmC,kBAEQnB,GAAG,CAACmB,IAFZ;AAAA,MAE3BC,IAF2B,aAE3BA,IAF2B;AAAA,MAErBC,KAFqB,aAErBA,KAFqB;AAAA,MAEdC,QAFc,aAEdA,QAFc;AAAA,MAEJC,OAFI,aAEJA,OAFI;AAInC,MAAMC,EAAE,GAAG,CACP;AACI,YAAQ,uBADZ;AAEI,aAAS;AAFb,GADO,EAIL;AACE,YAAQ,UADV;AAEE,aAAS;AAFX,GAJK,CAAX;;AASAC,0BAAYC,IAAZ,CACI,CAACF,EAAD,CADJ,EAEI,qCAFJ,EAGI,oCAAeJ,IAAf,EAAqBC,KAArB,EAA4BC,QAA5B,EAAsCC,OAAtC,CAHJ;;AAKAtB,EAAAA,GAAG,CAACE,IAAJ,CAAS;AAAED,IAAAA,MAAM,EAAE,IAAV;AAAgBqB,IAAAA,OAAO,EAAE;AAAzB,GAAT;AACH,CAnBD;eAqBe3B,M","sourcesContent":["import express from 'express';\r\n\r\nimport database from './models';\r\nimport UserController from './controllers/users';\r\nimport SectionController from './controllers/sections';\r\nimport CourseController from './controllers/courses';\r\nimport PostController from './controllers/posts';\r\n\r\nimport emailSender from './util/email/emailSender';\r\nimport newMsgTemplate from './util/email/newMessageTemplate';\r\n\r\nconst router = express.Router();\r\n\r\n// rota GET /api\r\nrouter.get('/', (req, res) => { \r\n    res.status(200).json({\r\n        \"app\": \"Positive Treinamentos\",\r\n        \"url\": \"http://www.positivetreinamentos.com.br/\",\r\n        \"developer\": {\r\n            \"name\": \"Matheus Ataide\",\r\n            \"email\": \"webdev@matheusataide.com.br\",\r\n            \"website\": \"http://matheusataide.com.br/\"\r\n        }\r\n    });\r\n});\r\n\r\nconst usersCtrl = UserController(database);\r\nrouter.get('/users', usersCtrl.list);\r\nrouter.get('/users', usersCtrl.insert);\r\nrouter.get('/users/:id', usersCtrl.index);\r\nrouter.delete('/users/:id', usersCtrl.remove);\r\nrouter.put('/users/:id', usersCtrl.edit);\r\n\r\nconst sectionsCtrl = SectionController(database);\r\nrouter.get('/sections/:name', sectionsCtrl.getByName);\r\nrouter.get('/sections/:name/:key', sectionsCtrl.index);\r\n\r\nconst coursesCtrl = CourseController(database);\r\nrouter.get('/courses', coursesCtrl.list);\r\nrouter.get('/courses/:id', coursesCtrl.index);\r\n\r\nconst postsCtrl = PostController(database);\r\nrouter.get('/posts', postsCtrl.list);\r\nrouter.get('/posts/:id', postsCtrl.index);\r\n\r\n//const msgsCtrl = MessageController(database);\r\nrouter.post('/messages', (req, res) => {\r\n    console.log(req.body);\r\n    const { name, email, whatsapp, content } = req.body;\r\n    \r\n    const to = [\r\n        { \r\n            \"name\": \"Positive Treinamentos\",\r\n            \"email\": 'positivetreinamentos@gmail.com'\r\n        },{\r\n            \"name\": \"Matheus \",\r\n            \"email\": 'webdev@matheusataide.com.br'\r\n        }];\r\n\r\n    emailSender.send(\r\n        [to],\r\n        \"Recebemos uma nova mensagem no site\",\r\n        newMsgTemplate(name, email, whatsapp, content)\r\n    );\r\n    res.json({ status: true, content: '' })\r\n});\r\n\r\nexport default router;"],"file":"routes.js"}